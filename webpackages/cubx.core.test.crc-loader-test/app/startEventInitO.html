<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CRC-TestWebapp</title>

    <link rel="stylesheet" href="style/app.css">
    <script src="../../../cubx.core.rte/webcomponents/webcomponents-lite.js"></script>
    <script>
        window.cubx = {
            CRCInit: {startEvent: 'pleaseStartNow'}
        };
    </script>
    <script src="../../../cubx.core.rte/crc-loader/js/main.js" data-crcinit-loadcif="true"></script>

</head>
<body>
<h2>This is a Cubixx-Webapplication</h2>

<p>To extend the application, you can use <i>plain-old-html</i> or <i>CubixxComponents</i></p>
<hr>
<a href="startEvent.html">Go Back</a>

<hr>
<h2>Start the CRC using 'window.cubx.CRCInit' object</h2>

<p>'pleaseStartNow' event is defined using 'window.cubx.CRCInit' object</p>
<hr>
<textarea id="logTa" rows="8" cols="50" style="display:block"></textarea>
<button id="dispatchEventB" type="button">Dispatch 'pleaseStartNow' event</button>
<hr>
<div>
    <elementary-example cubx-dependency="this/elementary-example/main"></elementary-example>
</div>

<script>
    (function() {
        'use strict';
        var logTa = document.querySelector('#logTa');
        var dispatchEventB = document.querySelector('#dispatchEventB');
        logTa.value = 'Log';

        dispatchEventB.addEventListener('click', function() {
            dispatchEventB.setAttribute('disabled', 'disabled');
            var event = new Event('pleaseStartNow');
            document.dispatchEvent(event);
            logTa.value += '\n\n--------\n\'pleaseStartNow\' event dispatched.';
            logTa.value += '\n\n-> CRC should start working.';
        });
    })()
</script>

</body>
</html>
